<!DOCTYPE html>
<html lang="ko"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="www.thymeleaf.org"
      layout:decorate="~{layout/layout.html}"
>
<body>
<div layout:fragment="content">

  <div class="container my-4">
    <div class="row">

      <!-- 이미지 슬라이드 카드 (왼쪽) -->
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <div id="itemImageCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">

              <!-- 캐러셀 인디케이터 -->
              <ol class="carousel-indicators">
                <li data-bs-target="#itemImageCarousel" data-bs-slide-to="0" class="active"></li>
                <li data-bs-target="#itemImageCarousel" data-bs-slide-to="1"></li>
                <li data-bs-target="#itemImageCarousel" data-bs-slide-to="2"></li>
                <li data-bs-target="#itemImageCarousel" data-bs-slide-to="3"></li>
                <li data-bs-target="#itemImageCarousel" data-bs-slide-to="4"></li>
              </ol>

              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img th:src="@{/items/{id}/itemImage(id=${item.id}, type='rep')}" class="d-block w-100" alt="대표 이미지" style="width: 300px; height: 300px; object-fit: fill;">
                </div>
                <div class="carousel-item">
                  <img th:src="@{/items/{id}/itemImage(id=${item.id}, type='add1')}" class="d-block w-100" alt="추가 이미지 1" style="width: 300px; height: 300px; object-fit: fill;">
                </div>
                <div class="carousel-item">
                  <img th:src="@{/items/{id}/itemImage(id=${item.id}, type='add2')}" class="d-block w-100" alt="추가 이미지 2" style="width: 300px; height: 300px; object-fit: fill;">
                </div>
                <div class="carousel-item">
                  <img th:src="@{/items/{id}/itemImage(id=${item.id}, type='add3')}" class="d-block w-100" alt="추가 이미지 3" style="width: 300px; height: 300px; object-fit: fill;">
                </div>
                <div class="carousel-item">
                  <img th:src="@{/items/{id}/itemImage(id=${item.id}, type='add4')}" class="d-block w-100" alt="추가 이미지 4" style="width: 300px; height: 300px; object-fit: fill;">
                </div>
              </div>

              <!-- 슬라이드 컨트롤 (이전, 다음) -->
              <button class="carousel-control-prev" type="button" data-bs-target="#itemImageCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#itemImageCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>

              <!-- 슬라이드 위치 표기 -->
<!--              <div class="carousel-indicators">-->
<!--                <p id="carouselPosition" style="text-align: center;">1 / 5</p>-->
<!--              </div>-->
            </div>
          </div>
        </div>
      </div>

      <!-- 정보 카드 (오른쪽) -->
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h2>상품 정보</h2>
            <p><strong>상품명:</strong> <span th:text="${item.name}"></span></p>
            <p><strong>가격:</strong> <span th:text="${item.price}"></span> 원</p>
            <p><strong>상품 설명:</strong> <span th:text="${item.description}"></span></p>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>

<!--자바스크립트 추가하는 영역-->
<script layout:fragment="javascript" th:inline="javascript">
  // $(document).ready(function() {
  //   const $carouselElement = $('#itemImageCarousel');
  //   const totalItems = $carouselElement.find('.carousel-item').length;
  //   const $positionIndicator = $('#carouselPosition');
  //
  //   // 초기에 위치 설정
  //   $positionIndicator.text(`1 / ${totalItems}`);
  //
  //   // 슬라이드 이벤트 리스너 추가
  //   $carouselElement.on('slide.bs.carousel', function(event) {
  //     const currentIndex = event.to + 1; // event.to는 0부터 시작하므로 +1
  //     $positionIndicator.text(`${currentIndex} / ${totalItems}`);
  //   });
  // });

</script>
</body>
</html>